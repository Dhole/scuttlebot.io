<html>
    <head>
    <title>Scuttlebot.io</title>
    <link rel="stylesheet" href="/css/index.css">
    <link rel="stylesheet" href="/css/prism.css">
    <script src="/js/prism.js"></script>
    <script src="/js/code-examples.js"></script>
  </head>
    <body>
      <div class="hero small">
      <h1><a href="/"><img src="/img/hermies-256.png"></a> Scuttlebot</h1>
    </div>
      <div class="tabs">
  <div class="current"><a href="/basics/install-the-database.html" title="Basics">Basics</a></div>
  <div ><a href="/social/social-network.html" title="Social">Social</a></div>
  <div ><a href="/advanced/writing-applications.html" title="Advanced">Advanced</a></div>
  <div ><a href="/whitepapers/secure-scuttlebutt.html" title="Whitepapers">Whitepapers</a></div>
  <div ><a href="/modules/ssb-client.html" title="Modules">Modules</a></div>
</div>
      <div class="nav-content-unit">
        <ul class="nav">
  <li ><a href="/basics/install-the-database.html" title="Install the database">Install the database</a></li>
  <li ><a href="/basics/open-a-client.html" title="Open a client">Open a client</a></li>
  <li ><a href="/basics/publish-a-message.html" title="Publish a message">Publish a message</a></li>
  <li ><a href="/basics/read-the-log.html" title="Read the log">Read the log</a></li>
  <li class="current"><a href="/basics/publish-a-file.html" title="Publish a file">Publish a file</a></li>
  <li ><a href="/basics/read-a-file.html" title="Read a file">Read a file</a></li>
  <li ><a href="/basics/encryption.html" title="Encryption">Encryption</a></li>
</ul>
        <div class="content">
          
    <p>
      To publish a file, you must first add it to Scuttlebot's blob-store.
      Then, you announce the file by publishing its hash-ID in a message.
    </p>

    <h2>Add a file from memory</h2>
    <div class="code-examples">
    <div class="head">
      <div class="tab">js</div><div class="tab">bash</div>
    </div>
    <div class="body">
      <pre><code class="language-js">var pull = require('pull-stream')
pull(
  pull.values('hello, world'),
  sbot.blobs.add(function (err, hash) {
    // 'hash' is the hash-id of the blob
  })
)</code></pre><pre><code class="language-bash">$ echo "hello, world" | sbot blobs.add
&hT/5N2Kgbdv3IsTr6d3WbY9j3a6pf1IcPswg2nyXYCA=.sha256</code></pre>
    </div>
  </div>
    
    <h2>Add a file from disk</h2>
    <div class="code-examples">
    <div class="head">
      <div class="tab">js</div><div class="tab">bash</div>
    </div>
    <div class="body">
      <pre><code class="language-js">var fs = require('fs')
var pull = require('pull-stream')
var toPull = require('stream-to-pull-stream')
pull(
  toPull.source(fs.createReadStream('./hello.txt')),
  sbot.blobs.add(function (err, hash) {
    // 'hash' is the hash-id of the blob
  })
)</code></pre><pre><code class="language-bash">$ cat ./hello.txt | sbot blobs.add
&hT/5N2Kgbdv3IsTr6d3WbY9j3a6pf1IcPswg2nyXYCA=.sha256</code></pre>
    </div>
  </div>
    
    <h2>Publish the file to the network</h2>
    <p>Adding a blob will only affect the local blobstore. To distribute the file, you must also link to it in an unencrypted message.</p>
    <div class="code-examples">
    <div class="head">
      <div class="tab">js</div><div class="tab">bash</div>
    </div>
    <div class="body">
      <pre><code class="language-js">sbot.publish({
  type: 'post',
  text: 'checkout [this file!]('+hash+')',
  mentions: [{
    link: hash,        // the hash given by blobs.add
    name: 'hello.txt', // optional, but recommended
    size: 12,          // optional, but recommended
    type: 'text/plain' // optional, but recommended
  }]
}, function (err, msg) {
  // ...
})</code></pre><pre><code class="language-bash">$ sbot publish --type post --text "checkout this file!" \
  --mentions.link "&hT/5N2Kgbdv3IsT...swg2nyXYCA=.sha256" \
  --mentions.name "hello.txt" \
  --mentions.size 12 \
  --mentions.type "text/plain"</code></pre>
    </div>
  </div>

    <p class="next"><a href="/basics/read-a-file.html">Read a file</a></p>
    <ul class="see-also">
      <li><a href="/modules/scuttlebot-blobs.html">Scuttlebot.Blobs API</a></li>
      <li><a href="/advanced/linking-messages.html">Linking messages</a></li>
      <li><a href="/advanced/pull-streams.html">Pull streams</a></li>
    </ul>
  
        </div>
      </div>
      <div class="footer">
  <ul class="footer-section">
    <li>Guides</li>
    <li ><a href="/guides/lets-write-a-todo-list-app/intro.html" title="Let's Write: a Todo-List app">Let's Write: a Todo-List app</a></li>
    <li ><a href="/guides/lets-write-a-private-messaging-app/intro.html" title="Let's Write: a Private Messaging app">Let's Write: a Private Messaging app</a></li>
    <li ><a href="/guides/lets-write-a-file-sharing-app/intro.html" title="Let's Write: a File-Sharing app">Let's Write: a File-Sharing app</a></li>
    <li ><a href="/guides/how-to-use-pull-streams/intro.html" title="How to use Pull Streams">How to use Pull Streams</a></li>
  </ul>
  <ul class="footer-section">
    <li>Applications</li>
    <li><a href="https://github.com/ssbc/patchwork" title="Patchwork">Patchwork</a>
    <li><a href="https://github.com/ssbc/ssb-blessed-dashboard" title="CLI Dashboard">CLI Dashboard</a>
    <li><a href="https://github.com/ssbc/ssb-example-pm" title="CLI Private Msg">CLI Private Msg</a>
  </ul>
  <ul class="footer-section">
    <li>Community</li>
    <li><p>#scuttlebutt on freenode</p></li>
    <li><a href="https://github.com/ssbc">GitHub Org</a></li>
    <li><a href="https://github.com/ssbc/scuttlebot">GitHub Repo</a></li>
  </ul>
</div>
    </body>
  </html>